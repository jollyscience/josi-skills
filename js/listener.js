// Generated by CoffeeScript 1.6.3
(function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}};t=require("../class/promises");e=function(){function e(e,t){this.robot=e;this.expectation=t;this.call=n(this.call,this);this.matcher=n(this.matcher,this);this}e.prototype.matcher=function(e){if(e.text!=null)return e.text.match(this.robotNameRegExp&&e.text.match(this.expectation))};e.prototype.init=function(){var e;try{this.promise=new t.Promise;this.robot.enableSlash?this.robotNameRegExp=new RegExp("^(?:/|"+this.robot.name+":?)\\s*(.*?)\\s*$","i"):this.robotNameRegExp=new RegExp("^"+this.robot.name+":?\\s*(.*?)\\s*$","i");return this.promise}catch(n){e=n;throw new Error("Could not init Listener.",e)}};e.prototype.call=function(e){var t,n;try{n=this.matcher(e);return n===null?this.promise.reject(e):this.promise.resolve(e)}catch(r){t=r;throw new Error("Could not call Listener.",t)}};return e}();module.exports=e}).call(this);